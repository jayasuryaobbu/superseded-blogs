jQuery(document).ready(function(i){"use strict";function t(){1==$insight.noticeCookieEnable&&"no"===$insight.noticeCookieConfirm&&""!=$insight.noticeCookieMessages&&(i.growl({location:"br",fixed:!0,duration:36e5,title:"",message:$insight.noticeCookieMessages}),i("#tm-button-cookie-notice-ok").on("click",function(){i(this).parents(".growl-message").first().siblings(".growl-close").trigger("click");var t={action:"notice_cookie_confirm"};t=i.param(t),i.ajax({url:$insight.ajaxurl,type:"POST",data:t,dataType:"json",success:function(t){i.growl.notice({location:"br",duration:5e3,title:"",message:$insight.noticeCookieOKMessages})},error:function(i){alert(i)}})}))}function e(){i(".switcher-item").on("click",function(){if(!i(this).hasClass("active")){var t={action:"shop_layout_change"};i(this).hasClass("list")?t.shop_layout="list":t.shop_layout="grid",t=i.param(t),i.ajax({url:$insight.ajaxurl,type:"POST",data:t,dataType:"json",success:function(i){location.reload()},error:function(i){alert(i)}})}})}function a(){var t=i("#mini-cart");t.on("click",function(){SmartPhone.isAny()?window.location.href=i(this).data("url"):i(this).addClass("open")}),i(document).on("click",function(e){0==i(e.target).closest(t).length&&t.removeClass("open")})}function n(){c.on("click",".yith-compare-btn .compare",function(){i(this).addClass("loading")}),c.on("yith_woocompare_open_popup",function(){i(".yith-compare-btn .compare").removeClass("loading"),c.addClass("compare-popup-opened")}),c.on("click","#cboxClose, #cboxOverlay",function(){c.removeClass("compare-popup-opened")})}function o(){if(!c.hasClass("single-product"))return!1;var t=i(".isw-swatches--in-single"),e=t.data("product_variations");t.find("select").on("change",function(){for(var t=i(this).data("attribute_name"),a=i(this).val(),n=e.length-1;n>=0;n--){var o=e[n].attributes;for(var s in o)if(o.hasOwnProperty(s)&&s==t&&o[s]==a){var r=e[n].image.url,c=i(".woo-single-images .tm-swiper"),l=c.children(".swiper-container")[0].swiper;c.find("a").each(function(){var t=i(this).data("src");if(t==r){var e=i(this).parents(".swiper-slide").first(),a=e.index();return l.slideTo(a),!0}});break}}})}function s(){i(".quickview-btn").each(function(){var t=i(this).siblings(".woo-quick-view-popup");i(this).magnificPopup({items:{src:t.html(),type:"inline"},callbacks:{open:function(){"undefined"!=typeof isw&&"undefined"!=typeof isw.Swatches&&isw.Swatches.init(),i(".woo-quick-view-popup-content .tm-swiper").insightSwiper(),i(".woo-quick-view-popup-content .entry-summary").slimScroll({height:"600px",size:"5px",borderRadius:0,distance:0})}}})})}function r(){i(document).on("click",".increase, .decrease",function(){var t=i(this).siblings(".qty"),e=parseFloat(t.val()),a=parseFloat(t.attr("max")),n=parseFloat(t.attr("min")),o=t.attr("step");e&&""!==e&&"NaN"!==e||(e=0),""!==a&&"NaN"!==a||(a=""),""!==n&&"NaN"!==n||(n=0),"any"!==o&&""!==o&&void 0!==o&&"NaN"!==parseFloat(o)||(o=1),i(this).is(".increase")?a&&(a==e||e>a)?t.val(a):t.val(e+parseFloat(o)):n&&(n==e||e<n)?t.val(n):e>0&&t.val(e-parseFloat(o)),t.trigger("change")})}var c=i("body");i(".add_to_wishlist").on("click",function(){i(this).addClass("loading")}),i(document).on("insightGridBeforeInit",function(t,e){if(!e.hasClass("tm-product"))return!1;var a=e.find(".tm-grid-query").first();e.find(".price_slider").on("slidechange",function(t,n){var o=jQuery.parseJSON(a.val());o.minPrice=n.values[0],o.maxPrice=n.values[1],a.val(JSON.stringify(o)),i(document).trigger("insightGridInfinityLoad",e)}),e.find(".tm-grid-ajax-field").on("change",function(){var t=jQuery.parseJSON(a.val()),n=i(this).val();if(i(this).hasClass("product-sorting")){var o=n.split(":");switch(o[0]){case"popularity":t.meta_key="total_sales",t.orderby="meta_value_num",t.order="desc";break;case"rating":t.meta_key="_wc_average_rating",t.orderby="meta_value_num",t.order="desc";break;case"price":t.meta_key="_price",t.orderby="meta_value_num",t.order=o[1];break;case"date":t.meta_key="",t.orderby="date",t.order=o[1]}}a.val(JSON.stringify(t)),i(document).trigger("insightGridInfinityLoad",e)})}),i(document).on("insightGridInit",function(i,t,e){t.hasClass("equal-thumbnail-height")&&e.find(".product-thumbnail").matchHeight()}),i(document).on("insightSwiperInit",function(i,t,e){e.hasClass("equal-thumbnail-height")&&e.find(".product-thumbnail").matchHeight()}),i(document).on("insightGridUpdate",function(i,t,e,a){t.hasClass("tm-product")&&t.hasClass("style-grid")&&(a.find(".product-thumbnail").matchHeight(),"undefined"!=typeof isw.Swatches&&isw.Swatches.init())}),a(),o(),n(),s(),r(),e(),t()});